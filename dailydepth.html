<!--#include virtual="/header.html" -->

<script>
  $(function() {
    $('#dt').datepicker();

    s = '';
    for (i = 6; i < 36; i++) {
        s += '<option value=' + i + '>' + i + '</option>';
    }
    $('#chainage').append(s);

    $('#dt').change(function () {

        $.getJSON('/api/depths?date=' + $(this).val(), function (data) {

            $('#flows option').remove();

            s = '';
            $.each(data.Flowrates, function (idx, itm) {
                s += '<option value=' + itm + '>' + itm + '</option>';
            });

            $('#flows').append(s);

            $('#flowPred').text(data.Predicted);
            $('#flowAct').text(data.Actual);
        });
    });

    $('#display').click(function () {
        switch ($("input:radio[name=discharge]:checked").val()) {
            case '0':
                flow = $('#flowPred').text(); break;
            case '1':
                flow = $('#flowAct').text(); break;
            case '2':
            case '3':
                flow = $('#flows').val();
                break;
        }

        $.getJSON('/api/depths/calculate?date=' + $('#dt').val() +
            '&chainage=' + $('#chainage').val() + 
            '&flowRate=' + flow + '&flowType=0' + 
            '&width=' + $('#width').val() + 
            '&sounding=0', function (data) {
            $('tr', '#location tbody').remove();

            s = '';
            $.each(data.items[0].items, function (idx, itm) {
                s += '<tr><td>' + itm.period + '</td><td>' + itm.chainage + '</td><td>' + itm.depth + '</td><td>' + itm.location + '</td></tr>';
            });

            $('#location tbody').append(s);
        });
      });

    });
  });
</script>

<form>
  <div class="span-2">
    <h2>Daily Depths</h2>

    <label for="date">Date:</label>
    <input id="date" type="text" name="date" />
  </div>

  <div class="span-2">
    <h2>River Discharge</h2>

    <input type="radio" name="discharged" /> Predicted (1275m3/s)<br />
    <input type="radio" name="discharged" /> Actual (0m3/s)<br />
    <input type="radio" name="discharged" /> User-defined <input type="text" /> m3/s<br />
  </div>

  <div class="span-2">
    <h2>Chainage:</h2>

    <select>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
      <option value="24">24</option>
      <option value="25">25</option>
      <option value="26">26</option>
      <option value="27">27</option>
      <option value="28">28</option>
      <option value="29">29</option>
      <option value="30">30</option>
      <option value="31">31</option>
      <option value="32">32</option>
      <option value="33">33</option>
      <option value="34">34</option>
      <option value="35" selected="selected">35</option>
    </select>
  </div>

  <div class="span-2">
    <h2>Channel Condition:</h2>

    <input type="radio" /> Current Soundings<br />
    <input type="radio" /> Design Grade

    <select>
      <option value="100" selected="selected">100</option>
      <option value="95">95</option>
      <option value="90">90</option>
      <option value="85">85</option>
      <option value="80">80</option>
      <option value="75">75</option>
      <option value="70">70</option>
      <option value="65">65</option>
      <option value="60">60</option>
    </select> %
  </div>
</form>

<!--#include virtual="/footer.html" -->
